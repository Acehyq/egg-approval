#1 用户管理
##1.1 注册 
包括姓名/部门/用户编号/职位/密码
**Request**
```
PUT /user
{
    name: "张三",
    department: "marketing",
    code: "10001",
    position: "crew",
    password: "12345"
}
```
**Response**
```
{
    code: 0,
    msg: "",
    data: {
        id: "dcba"
    }
}
```
##1.2 登录
用户输入用户编号(code)/密码(password), 系统验证成功后响应token

**Request**
```
POST /user/login
{
    code: "10001",
    password: "12345"
}
```
**Response**
```
{
    code: 0,
    msg: "",
    data: {
        token: "10001_token"
    }
}
```
#2 审批流
## 2.1 申请
用户在前端页面填写出差申请的内容, 包括:
标题/类型/内容/资金/资金用途,
创建成功后, 返回审批流的id
**Request**  
type: 0国内, 1国外
```
PUT /approval/apply
headers.Authorization: "10001_token"
{
    "title": "2022年6月商汤超算中心市场部宴会",
    "type": 0,
    "content": "我司受邀出席商汤超算中心于2022年6月18日，在上海自贸区临港新片区举办的合作单位宴会.
    申请6月16日至6月19日出差上海, 申请出差经费3万元",
    "money": 30000,
    "useOfMoney": "交通, 住宿, 餐饮, 大客户关系维护支出"
}
```
**Response**
```
{
    code: 0,
    msg: "",
    data: {
        id: "12345"
    }
}
```

## 2.2 详情
请求中使用审批流id, 获取审批流详情, 包括:
审批流id/审批流编码/标题/类型/内容/资金/资金使用说明/提交人信息/
审批人信息/审批意见/状态/创建时间/更新时间
前端页面
**Request**
```
GET /approval/detail/{id}
headers.Authorization: "10001_token"
```
**Response**  
```
{
    code: 0,
    data:{
        "id": "12345",
        "code": "abcd",
        "title": "2022年6月商汤超算中心市场部宴会",
        "type": 0,
        "content": "我司受邀出席商汤超算中心于2022年6月18日，在上海自贸区临港新片区举办的合作单位宴会.
        申请6月16日至6月19日出差上海, 申请出差经费3万元",
        "money": 30000,
        "useOfMoney": "交通, 住宿, 餐饮, 大客户关系维护支出",
        "applicant": {
            "id": "6211b67478875d21a96277e7",
            "code": "10001",
            "name": "张三"
        },
        "approver": {
            "id": "6211b67478875d21a96277e9",
            "code": "20001",
            "name": "李四"
        },
        "comment": null
        "status": 0,
        "created_time": "2022-03-20T19:39:52Z",
        "updated_time": "2022-03-21T19:39:52Z"
    }
}
```

## 2.3 我的申请列表
前端展示审批流列表, 列表中的元素只展示核心内容
**Request**
```
GET /approval/list?page=1&limit=10
headers.Authorization: "10001_token"
```
**Response**
```
{
    code:0,
    data: [
        {
            "id": "6211b67478875d21a96277e1",
            "code": "abcd",
            "title": "2022年6月商汤超算中心市场部宴会",
            "type": 0,
            "money": 30000,
            "applicant": {
                "id": "6211b67478875d21a96277e7",
                "code": "10001",
                "name": "张三"
            },
            "approver": {
                "id": "6211b67478875d21a96277e9",
                "code": "20001",
                "name": "李四"
            },
            "status":0
        },
        {
            "id": "6211b67478875d21a96277e2",
            "code": "xzy",
            "title": "2022年特斯拉ModelY上海新品发布会",
            "type": 0,
            "money": 30000,
            "applicant": {
                "id": "6211b67478875d21a96277e7",
                "code": "10001",
                "name": "张三"
            },
            "approver": {
                "id": "6211b67478875d21a96277e9",
                "code": "20001",
                "name": "李四"
            },
            "status": 1
        }
    ]
}
```

## 2.4 领导的待审批列表
部门领导的待审批审批流列表
**Request**
```
GET /approval/approveList?page=1&limit=10
headers.Authorization: "20001_token"
```
**Response**
```
{
    code:0,
    data: [
        {
            "id": "6211b67478875d21a96277e1",
            "code": "abcd",
            "title": "2022年6月商汤超算中心市场部宴会",
            "type": 0,
            "money": 30000,
            "applicant": {
                "id": "6211b67478875d21a96277e7",
                "code": "10001",
                "name": "张三"
            },
            "approver": {
                "id": "6211b67478875d21a96277e9",
                "code": "20001",
                "name": "李四"
            },
            "status":0
        },
        {
            "id": "6211b67478875d21a96277e2",
            "code": "xzy",
            "title": "2022年特斯拉ModelY上海新品发布会",
            "type": 0,
            "money": 30000,
            "applicant": {
                "id": "6211b67478875d21a96277e7",
                "code": "10001",
                "name": "张三"
            },
            "approver": {
                "id": "6211b67478875d21a96277e9",
                "code": "20001",
                "name": "李四"
            },
            "status": 0
        }
    ]
}
```

## 2.5 审批
使用审批流id, 对审批流进行审批, action: 1通过, 2驳回   
**Request**
```
POST /approval/{id}
headers.Authorization: "20001_token"
{
    id: "6211b67478875d21a96277e7",
    comment: "同意",
    action: 1
}
```
**Response**
```
{
    code: 0
}
```

#3 管理
##3.1 审批流操作记录
前端页面, 部门经理可以查询每个审批流的每一个操作记录, 包括创建/审批通过/审批驳回
**Request**
```
GET /approval/log?page=1&limit=10
headers.Authorization: "20001_token"
```
**Response**
```
{
    code: 0,
    msg: "",
    data: [
        {
            "id": "6211b67478875d21a96277e5",
            "code": "abcd",
            "title": "2022年6月商汤超算中心市场部宴会",
            "type": 0,
            "action": 0
        },
        {
            "id": "6211b67478875d21a96277e6",
            "code": "xyz",
            "title": "2022年特斯拉ModelY上海新品发布会",
            "type": 0,
            "action": 1
        }
    ]
}
```
##3.2 资金使用记录
前端页面, 部门经理可以查询每笔资金使用记录
**Request**
```
GET /approval/money/log?page=1&limit=10
headers.Authorization: "20001_token"
```
**Response**
```
{
    code: 0,
    msg: "",
    data: [
        {
            "id": "6211b67478875d21a96277e3",
            "code": "xyz",
            "money": 30000
        }
        {
            "id": "6211b67478875d21a96277e4",
            "code": "abcd",
            "money": 30000
        },
    ]
}
```
##3.3 部门资金
部门经理查询部门资金余额
**Request**
```
GET /department/money
headers.Authorization: "20001_token"
```
**Response**
```
{
    code: 0,
    msg: "",
    data: {
        money: 1000000
    }
}
```
